
<link rel="import" href="/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="behavior.html">
<dom-module id='avatar-picker'>

	<template>
		<style>

			:host {	display:block;}


			.grid-content{
				@apply(--layout-horizontal);
				@apply(--layout-wrap);
				@apply(--layout-justified);
			}
			.grid-item{
				display:inline-block;
				@apply(--layout-horizontal);
				@apply(--layout-center-center);
				height: 55px;
				width: 55px;
			}
			.grid-item:focus{outline:none}
			.grid-item:focus .avatar-icon{

				box-shadow:inset 0 0 0 2px white,inset 0 0 0 4px rgb(41, 136, 255);
			}
			.avatar-icon{
				height:50px;
				width:50px;
				border-radius: 100px;
				box-shadow:inset 0 0 0 4px white;
			}

			ui-button#close{
				display:block;
				position: relative;
				margin:0 auto;
				width:180px;
				border-radius: 7px;
				text-align: center;
				border:2.5px solid;
				margin-top:15px;
			}

		</style>
		<!--<avatar-data avatar="{{local}}"></avatar-data>-->
		<content-menu id="menu" opened="{{opened}}" no-title>

			<iron-selector style="box-shadow:0 !important;"
			               slot="contents"
			               class="grid-content"
			               on-iron-select="_handleSelect"
			               attr-for-selected="name">


				<template is="dom-repeat" items="[[items]]" as="item">

					<div class="grid-item" item-icon tabindex="0" name$="[[item.id]]" avatar="{{item}}">
						<iron-icon class="avatar-icon" src="[[item.src]]" item-icon></iron-icon>
					</div>
				</template>

			</iron-selector>

			<ui-button id="close" on-tap="close">OK</ui-button>


		</content-menu>

	</template>
	<script>
		Polymer({

			is: 'avatar-picker',
			behaviors:[ProfileAvatars.AvatarPicker],
			properties:{
				opened:{type:Boolean},
				userSelected:{type:Boolean,value:false}
			},
			_handleSelect(e, data){
				this.selectAvatar(e.detail.item.avatar.id);
			},
			present(target){
				this.$.menu.present(target);
			},
			close(){
				this.$.menu.dismiss();
			},
			attached(){
				window.addEventListener('avatars',(e)=>{
					this.present(e.detail);
				})
			}

		});
	</script>

</dom-module>

