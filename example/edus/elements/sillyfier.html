<script>
	((window)=>{

		const colors = ['blue','gold','green']
		const Sillification = Base => class extends Base{
			get silly(){ return this.hasAttribute('silly') }
			set silly(x){
				if(x === '' || x === true) this.setAttribute('silly','')
				else this.removeAttribute('silly')
				return x
			}
		}
		const Sillyfier = Base => class extends Base{
			sillify(x){
				let color = 'color_data' in x ? x['color_data']:{index:0,times:false,silly:0}
				var index = color.index+1
				if(color.times){
					if(index >= colors.length) index = 0
					if(index !== color.index){
						color.index = index
						x.style.background = colors[index]
					}
					color.times = false
				}
				else color.times = true

				if(color.silly === 3){
					x.silly = true
				}
				if( color.silly >= 9 ){
					color.silly = 0
					x.silly = null
				}else{
					color.silly = color.silly + 1
				}
				x.color_data = color
				return x
			}
		}

		window.Sillyfier = Sillyfier
		window.Sillification = Sillification
	})(window)

</script>