<template id="sticky-page-template">
	<style>
		@import "/modules/wwi/component/design/host.css";

		sticky-list{
			display: inline-block;
			width: calc(98.9% / 3);
			top:1px;
			height:calc(100% - 1px);
			background:white;
			--header-shadow:clear;
			--header-fixed-width:100%;
			--header-title-left:0px;
			--header-radius:0;
			--header-height:34px;
			--header-back:white;
			--header-fixed-shadow:drop-shadow(-6px 0 10px rgba(0,0,0,0.4));
			--header-fixed-y:translateY(0);
		}
	</style>

	<sticky-list multi id="one"></sticky-list>
</template>
<script>
	(function (doc) {
		const Page = wwi.page(doc)
		Page(class extends Page.Element{
			get list(){ return this.query('sticky-list#one') }
			connected(){
				this.unset = true
				this.on('active',()=>{
					if('unset' in this){
						this.list.on('items',e=>{for(let item of e.detail) item.background = item.data.value})
						this.list.set_items(...(get_transparent_items(5)))
						delete this.unset
					}
				})
			}
		})


		function get_transparent_items(number_of_items=10){
			let colors = fxy.require('design/colors')
			let items = []
			let increment = 1/number_of_items
			for(let i=1;i<=number_of_items;i++){
				for(let color of colors.keys()){
					if(!color.includes('-bg') && !color.includes('-50')){
						let t = parseFloat((i * increment).toFixed(4))
						let c = colors.transparent(color,t)
						items.push({
							name:`${color} ${t}`,
							value:c,
							name_html:`<div body select-all>${c}</div>
												<div description sort select-text>${color}</div>
												<div tag>${t}</div>
											   `
						})
					}
				}
			}
			return items
		}
	})(document)
</script>