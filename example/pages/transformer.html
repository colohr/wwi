<template id="transformer-page">
    <style>
        @import "/modules/wwi/component/design/host.css";
        :host{
            display:block;
        }
        optimus-prime{
            background-color: #dedede;
            border-radius: 9px;
            border:5px solid var(--blue);
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            height:calc(70vh - 40px);
            width: calc(70vh - 40px);
            box-sizing: border-box;
        }
        [travel]{
            position: absolute;
            top:7px;
            left:7px;
            right:7px;
            height:40px;
            /*background-color: #f3f3f3;*/
            z-index: 100;
            padding:5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            border-radius: 7px;
            border:3px solid var(--blue);
            box-sizing: border-box;
            background-color: #dedede;

        }
        [travel] > div{
            font-size:12px;
            color:gray;
        }
        [travel] > div > i{
            font-size:10px;
        }
        [travel] > div > b{
            color:var(--blue);
        }
        [title]{
            position:relative;
            color:white;
            font-size:30px;
            padding:10px;
            font-weight: 900;
            letter-spacing: 1px;
            text-shadow:0 1px 4px rgba(0,0,0,0.14);
        }
        [title] > div{
            border-bottom:1px dotted rgba(0,0,0,0.14);
            padding-top:4px;
            padding-bottom:3px;
        }


        [title] > [sub-title]:nth-child(2){
            font-size:20px;
            font-weight: 500;
        }
        [title] > [sub-title]:nth-child(3){
            font-size:24px;
            font-weight: 700;
        }
        remote-control{
            position: absolute;
            left:0;
            right:0;
            bottom:0;
            z-index: 100;

            --shadow: 0 2px 10px rgba(0,0,0,0.2);
            --radius: 7px;
            --border:3px solid var(--blue);
            --background: #dedede;
            --color:var(--blue);

        }
    </style>
    <div view gui horizontal center-center>
       <optimus-prime>
           <div gui horizontal center-center>
               <div title>
                   <div>optimus-prime</div>
                   <div sub-title>with behavior extensions:</div>
                   <div sub-title>Draw & Timeout & Transforms</div>
               </div>
           </div>

       </optimus-prime>
    </div>
    <div travel gui horizontal center-center around></div>
</template>
<script>
    (function(doc){
        const TransformerPage = wwi.page(doc)
	    TransformerPage(class extends TransformerPage.Element{
	    	get prime(){ return this.query('optimus-prime') }
            transitioned(){}
            connected(){
				window.prime = this.prime
                window.prime.addEventListener('travel',this.update_travel.bind(this))
            }
            update_travel(e){
            	let travel = e.detail
                let element = this.query('[travel]')
                element.style.borderColor = e.currentTarget.color
                let html = ['<div>Travel:</div>']
                for(let name in travel){
            		let value = travel[name]
                    if(typeof value === 'object' && value !== null){
	                    for(let i in value){
		                    html.push(`<div><em>${name} ${i}:</em> <strong>${value[i]}</strong></div>`)
	                    }
                    }
                    else html.push(`<div><em>${name}:</em> <strong>${value}</strong></div>`)
                }
                element.innerHTML = html.join('')

            }
        })
    })(document)
</script>
