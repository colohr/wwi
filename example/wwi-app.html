<template id="wwi-app-template">
	<style>
		@import "modules/wwi/component/design/host.css";
		@import "modules/wwi/component/design/app.css";

		:host {
			--bar-color:white;
			--text:var(--dark-bright);
			--bar-height: 20px;
			display: block;
			position: relative;
			min-height: 100vh;
			width: 100vw;
			overflow: hidden;
			z-index: 1;
			color:var(--app-text);
		}

		[app-drawer] {
			background-color: white;
			position: absolute;
			top: 40px;
			width: 260px;
			z-index: 10;
		}

		[menu-title] {
			display: block;
			padding: 4px;
			margin: 10px;
		}

		content-bar {
			--bar-text:var(--text);
			top: 0;
			color:var(--text);
		}

		content-button[kind="item"] {
			--width: calc(100% - 28px);
			text-align: left;
			font-size: 16px;
			font-weight: bold;
			margin: 5px 14px 5px 14px;
			background-color: rgb(237, 237, 237);
			--title-color: var(--text);
			--focus-color: var(--text);
		}


	</style>

	<content-bar app-title="World Wide Internet" hash="start" pug>
		<content-button drawer slot="aside" icon="pug">
		</content-button>
	</content-bar>

	<content-drawer app-drawer left>
		<content-menu slot="content">
			<div menu-title slot="title">
				<slot name="menu-title"></slot>
			</div>
		</content-menu>
	</content-drawer>

	<content-pages app-pages>

		<start-page></start-page>

		<wwe-page page-title="Select, Tickity + WWE"
		          load="custom-elements/select/index.html,custom-elements/tickity/index.html,custom-elements/wwe/index.html,custom-elements/wwe/ui/card/index.html"
		          wait="wwe-library tickity-tock tickity-button select-menu"></wwe-page>

		<lists-page page-title="Lists"
		            load="custom-elements/browser/index.html,custom-elements/sticky/index.html"
		            wait="browser-list,sticky-list"></lists-page>

		<code-page  page-title="Code Editor"
		            load="custom-elements/code/index.html"
		            wait="code-library"></code-page>

		<content-page page-title="Content Components"></content-page>

		<player-page page-title="Media Player"
		             load="custom-elements/window/index.html,custom-elements/media/index.html"
		             wait="window-frame media-player"></player-page>

		<window-page page-title="Window Frame"
		             load="custom-elements/window/index.html"
		             wait="window-frame"></window-page>

		<walki-page name="walki"
		            load="custom-elements/walki/index.html"
		            wait="walki-tag"></walki-page>

		<transformer-page load="custom-elements/optimus-prime/index.html"
		                  wait="optimus-prime"></transformer-page>

		<data-page page-title="Data & Drop"
		           load="custom-elements/data/index.html,custom-elements/drop/index.html"
		           wait="data-library,drop-box"></data-page>

		<modules-page load="custom-elements/code/index.html,custom-elements/wwe/ui/card/index.html"
		              wait="code-library"></modules-page>

		<art-page load="custom-elements/wwe/index.html,custom-elements/art/index.html"
		          wait="art-library"></art-page>

		<mixin-page></mixin-page>
	</content-pages>

</template>

<script>
	(function (doc) {
		const App = wwi.app(doc)
		App(class extends App.Element {
			show() {


			}
			will_show_page(name){

				if(name !== 'start' && !('bg' in this)){
					this.bg = document.createElement('wwe-background')
					fxy.port(url.elements('wwe/background/index.html'))
					   .then(wwi.when('wwe-background'))
					   .then(() => {

						   this.bg.setAttribute('timer', 900000)
						   this.bg.setAttribute('color', 'white')
						   app.body.appendChild(this.bg)
					   })
//					fxy.port(url.elements('wwe/ui/background/index.html'))
//					   .then(wwi.when('wwe-background'))
//					   .then(() => {
//						   this.bg = document.createElement('wwe-background')
//						   this.bg.setAttribute('timer', 800000)
//						   this.bg.setAttribute('color', 'white')
//						   app.body.appendChild(this.bg)
//					   })
				}
			}
		})
	})(document)
</script>
