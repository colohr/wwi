<template id="frame-component">
    <style>
        @import "/modules/wwi/component/design/host.css";
        :host{
	        display: none;
	        position: absolute;
	        box-shadow: 0 1px 19px rgba(0,0,0,0.3);
	        box-sizing: border-box;
	        padding:1px;
	        margin:0 auto;
	        top:calc(40px + 1%);
	        width:98%;
	        left:1%;
	        height:calc(98% - 40px);
	        z-index:1;
	        border-radius: 7px;
	        overflow: hidden;
        }
        :host([full]){
	        top:0;
	        left:0;
	        height: 100%;
	        width: 100%;
	        position: relative;
	        box-shadow: none;
        }
        :host([aria-expanded="false"]){
	        display: none;
        }
	    :host([aria-expanded="true"]){
		    display: block;
	    }
	    iframe{
		    border:none;
	    }
    </style>
	<iframe view></iframe>

</template>
<script>
    (function(doc){
        const FrameComponent = wwi.element(doc)
	    FrameComponent(class extends FrameComponent.Element{
        	constructor(){
        		super('routes',{
        			opened(value){
        				if(value === null) this.hide()
				        else this.show()
			        },
			        url(value){
        				if(value) this.view.src = value
			        }
		        })
	        }
	        connected(){
		        this.setAttribute('aria-expanded','false')
		        this.view.onload = e =>{
		        	this.loaded = true
		        	this.dispatch('loaded',this)
		        }
	        }
            hide(){
        		let button = this.button
	            if (button && 'aria' in button) button.aria.selected = false
	            this.aria.expanded = false
            }
	        show(){
		        let button = this.button
		        if (button && 'aria' in button) button.aria.selected = false
		        this.aria.expanded = true
	        }
	        get view(){ return this.query('iframe') }
        })


    })(document)
</script>
