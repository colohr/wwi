<template id="remote-control">
    <style>
        @import "/modules/wwi/component/design/host.css";

        :host{
	        outline: none;
        }
        :host(:focus){
	        background-color: rgba(0,0,0,0.3);
        }
	    [directions] content-action{
		    box-sizing: border-box;
		    margin:var(--margin,0 5px 0 5px);
		    background:var(--background,white);
		    box-shadow:var(--shadow,none);
		    border:var(--border,none);
		    border-radius: var(--radius,initial);
		    color:var(--color,var(--berry));
	    }

    </style>
	<div gui view directions horizontal center-center>
		<content-action left name="left">
			<content-icon name="left"></content-icon>
		</content-action>
		<content-action up name="up">
			<content-icon name="up"></content-icon>
		</content-action>
		<content-action down name="down">
			<content-icon name="down"></content-icon>
		</content-action>
		<content-action right name="right">
			<content-icon name="right"></content-icon>
		</content-action>
	</div>
</template>
<script>
    (function(doc){
        const RemoteControl = wwi.element(doc,'a11y')
	    RemoteControl(class extends RemoteControl.Element{
            a11y_connected(ally){
            	ally.on('keydown',e=>this.move(e.key.name))
            }
            connected(){
            	this.kind = 'button'
	            fxy.when('content-action').then(_=>{
		            let buttons = this.all('content-action')
		            for(let button of buttons){
			            button.on('click',e=>{
				            let name = e.currentTarget.getAttribute('name')
				            this.move(name)
			            })
		            }
	            })

            }
            move(name){
            	console.log(name)
            	let prime = this.prime
	            if(!prime) return
            	switch(name){
		            case 'down':
		            	prime.y += 5
			            break;
		            case 'left':
			            prime.x -= 5
			            break;
		            case 'right':
			            prime.x += 5
		            	break;
		            case 'up':
			            prime.y -= 5
		            	break;
		            case 'minus':
			            prime.scale_x -= 0.01
			            prime.scale_y -= 0.01
		            	break;
		            case 'equal':
		            	prime.scale_x += 0.01
			            prime.scale_y += 0.01
		            	break
		            case 'period':
		            	prime.skew_x += 1
			            prime.skew_y -= 1
		            	break
		            case 'comma':
		            	prime.skew_x -= 1
			            prime.skew_y += 1
		            	break
	            }
            }
		    get down(){ return this.query('[down]') }
            get left(){ return this.query('[left]') }
            get right(){ return this.query('[right]') }
            get up(){ return this.query('[up]') }
        })
    })(document)
</script>
